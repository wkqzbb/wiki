---
title: 领域建模
description: 如何用事件风暴构建领域模型？
---

微服务设计为什么要选择 DDD ? 其中有一个非常重要的原因，就是采用 DDD 方法建立的领域模型，可以清晰地划分微服务的逻辑边界和物理边界。可以说，在 DDD 的实践中，好的领域模型直接关乎微服务的设计水平。
因此，DDD 的战略设计是比战术设计更为重要的。

事件风暴是一项团队活动，领域专家与项目团队通过头脑风暴的形式，罗列出领域中的所有领域事件，整合之后形成最终的领域事件集合，然后对每一个事件，标注出导致该事件的命令，再为每一个事件标注出发起方的角色。命令可以是用户发起，也可以是第三方系统调用或定时器触发等，最后对事件进行分类，整理出实体、聚合、聚合根以及限界上下文。而**事件风暴正是 DDD 战略设计中经常使用的一种方法，它可以快速分析和分解复杂的业务领域，完成领域建模。**



![image-20240105233554143](https://wkq-img.oss-cn-chengdu.aliyuncs.com/img/image-20240105233554143.png)

## 事件风暴需要准备什么？

### 1. 事件风暴的参与者

事件风暴采用工作坊的方式，将项目团队和领域专家聚集在一起，通过可视化、高互动的方式一步一步将领域模型设计出来。领域专家是领域风暴中必不可少的核心参与者。很多公司可能并没有这个角色，那该找什么样的人来担当领域专家呢？

领域专家就是对业务或问题域有深刻见解的主题专家，它们非常了解业务和系统是怎么做的，同时也深刻理解为什么要这么设计。可以从业务人员、需求分析人员、产品经理或者在这个领域有多年经验的开发人员里去选。

除了领域专家，事件风暴的其他参与者可以是 DDD 专家、架构师、产品经理、项目经理、开发人员和测试人员等项目团队人员。

领域建模时统一团队语言的过程，因此项目团队应尽早地参与到领域建模中，这样才能高效建立起团队的通用语言。到了微服务建设时，领域模型也更容易与系统架构保持一致。

### 2. 事件风暴要准备的材料

事件风暴参与者将自己的想法和意见写在贴纸上，并将贴纸贴在墙上的合适位置。

在这个过程中，我们要用不同颜色的贴纸区分不同的领域行为。比如，可以用蓝色表示命令，用绿色表示实体，橙色表示领域事件，黄色标识补充信息等。补充信息主要用来说明注意事项，比如外部依赖。颜色并不固定，团队内统一即可。



![img](https://wkq-img.oss-cn-chengdu.aliyuncs.com/img/3a80b8e7648440a49b809d945e6439f8.jpg)



### 3. 事件风暴的关注点

在领域建模的过程中，需要重点关注这类业务的语言和行为。比如某些业务动作或行为（事件）是否会触发下一个业务动作，这个动作（事件）的输入和输出是什么？是谁（实体）发出的什么动作（命令），触发了这个动作（事件），我们可以从这些暗藏的词汇中，分析出领域模型中的事件、命令和实体等领域对象。

## 如何用领域风暴构建领域模型

领域建模的过程主要包括产品愿景、业务场景分析、领域建模和微服务拆分和设计这几个重要阶段。下面以用户中台为例，介绍如何用事件风暴构建领域模型。

### 1. 产品愿景

产品愿景的主要目的是对产品顶层价值的设计，使产品目标用户、核心架构、差异化竞争点等信息达成一致。

产品愿景的参与角色：领域专家、业务需求方、产品经理、项目经理和开发经理。

在建模之前
